<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>lw1_4</title>
</head>
<body>
<script src="functions/functions.js"></script>
<script>
    // Вспомогательные функции для создания объектов
    function createSlide(id, background = { type: 'none' }, elements = []) {
        return {
            id,
            background,
            elements,
            selectedElementIds: []
        };
    }

    function createTextElement(id, text = "Sample text", position = {x: 10, y: 10}, size = {width: 100, height: 50}) {
        return {
            id,
            kind: 'text',
            text,
            position,
            size,
            fontWeight: 400,
            fontFam: 'Arial',
            fontSize: 16,
            color: '#000000'
        };
    }

    function createImageElement(id, src = "image.jpg", position = {x: 50, y: 50}, size = {width: 200, height: 150}) {
        return {
            id,
            kind: 'image',
            src,
            position,
            size
        };
    }

    // Исходная презентация
    let presentation = {
        id: 1,
        title: 'Initial Presentation',
        slides: [],
        selectedSlideId: null
    };

    console.log('=== ДЕМОНСТРАЦИЯ РАБОТЫ ФУНКЦИЙ ===');

    // 1. renamePresentation
    console.log('1. renamePresentation');
    console.log('До:', presentation.title);
    const renamedPresentation = renamePresentation('Renamed Presentation', presentation);
    console.log('После:', renamedPresentation.title);
    console.log('______________________________________________________________');

    // 2. addSlide
    console.log('2. addSlide');
    const slide1 = createSlide('slide-1', { type: 'color', color: '#ffffff' });
    const presentationWithSlide = addSlide(slide1, presentation);
    console.log('До: слайдов', presentation.slides.length);
    console.log('После: слайдов', presentationWithSlide.slides.length);
    console.log('Добавленный слайд:', presentationWithSlide.slides[0]);
    console.log('______________________________________________________________');

    // 3. deleteSlides
    console.log('3. deleteSlides');
    const slide2 = createSlide('slide-2');
    const slide3 = createSlide('slide-3');
    let presentationWithMultipleSlides = addSlide(slide2, presentationWithSlide);
    presentationWithMultipleSlides = addSlide(slide3, presentationWithMultipleSlides);
    presentationWithMultipleSlides.selectedSlideId = 'slide-2';

    console.log('До: слайдов', presentationWithMultipleSlides.slides.length);
    console.log('Выбранный слайд:', presentationWithMultipleSlides.selectedSlideId);

    const presentationAfterDelete = deleteSlides(['slide-2'], presentationWithMultipleSlides);
    console.log('После: слайдов', presentationAfterDelete.slides.length);
    console.log('Выбранный слайд после удаления:', presentationAfterDelete.selectedSlideId);
    console.log('______________________________________________________________');

    // 4. moveSlide
    console.log('4. moveSlide');
    let presentationForMove = {
        ...presentation,
        slides: [
            createSlide('slide-a'),
            createSlide('slide-b'),
            createSlide('slide-c')
        ]
    };

    console.log('До перемещения:', presentationForMove.slides.map(s => s.id));
    const presentationAfterMove = moveSlide(0, 2, presentationForMove);
    console.log('После перемещения (slide-a с позиции 0 на позицию 2):', presentationAfterMove.slides.map(s => s.id));
    console.log('______________________________________________________________');

    // 5. addTextElement
    console.log('5. addTextElement');
    const textElement = createTextElement('text-1', 'Hello World!');
    const slideWithText = addTextElement(slide1, textElement);
    console.log('До: элементов', slide1.elements.length);
    console.log('После: элементов', slideWithText.elements.length);
    console.log('Добавленный элемент:', slideWithText.elements[0]);
    console.log('______________________________________________________________');

    // 6. addImageElement
    console.log('6. addImageElement');
    const imageElement = createImageElement('img-1', 'photo.jpg');
    const slideWithImage = addImageElement(slide1, imageElement);
    console.log('До: элементов', slide1.elements.length);
    console.log('После: элементов', slideWithImage.elements.length);
    console.log('Добавленный элемент:', slideWithImage.elements.find(el => el.kind === 'image'));
    console.log('______________________________________________________________');

    // 7. deleteElements
    console.log('7. deleteElements');
    const slideWithElements = {
        ...slide1,
        elements: [
            createTextElement('text-del-1'),
            createTextElement('text-del-2'),
            createImageElement('img-del-1')
        ]
    };

    console.log('До: элементов', slideWithElements.elements.length);
    const slideAfterDelete = deleteElements(slideWithElements, ['text-del-1', 'img-del-1']);
    console.log('После: элементов', slideAfterDelete.elements.length);
    console.log('Оставшиеся элементы:', slideAfterDelete.elements.map(el => el.id));
    console.log('______________________________________________________________');

    // 8. changeElementPosition
    console.log('8. changeElementPosition');
    const slideForPosition = {
        ...slide1,
        elements: [createTextElement('text-pos-1')]
    };

    console.log('До: позиция', slideForPosition.elements[0].position);
    const slideAfterPositionChange = changeElementPosition(slideForPosition, 'text-pos-1', {x: 100, y: 200});
    console.log('После: позиция', slideAfterPositionChange.elements[0].position);
    console.log('______________________________________________________________');

    // 9. changeElementSize
    console.log('9. changeElementSize');
    const slideForSize = {
        ...slide1,
        elements: [createTextElement('text-size-1')]
    };

    console.log('До: размер', slideForSize.elements[0].size);
    const slideAfterSizeChange = changeElementSize(slideForSize, 'text-size-1', {width: 300, height: 200});
    console.log('После: размер', slideAfterSizeChange.elements[0].size);
    console.log('______________________________________________________________');

    // 10. changeText
    console.log('10. changeText');
    const slideForTextChange = {
        ...slide1,
        elements: [createTextElement('text-change-1', 'Old text')]
    };

    console.log('До: текст', slideForTextChange.elements[0].text);
    const slideAfterTextChange = changeText(slideForTextChange, 'text-change-1', 'New text!');
    console.log('После: текст', slideAfterTextChange.elements[0].text);
    console.log('______________________________________________________________');

    // 11. changeTextFontSize
    console.log('11. changeTextFontSize');
    const slideForFontSize = {
        ...slide1,
        elements: [createTextElement('text-fontsize-1')]
    };

    console.log('До: размер шрифта', slideForFontSize.elements[0].fontSize);
    const slideAfterFontSizeChange = changeTextFontSize(slideForFontSize, 'text-fontsize-1', 24);
    console.log('После: размер шрифта', slideAfterFontSizeChange.elements[0].fontSize);
    console.log('______________________________________________________________');

    // 12. changeTextFontFamily
    console.log('12. changeTextFontFamily');
    const slideForFontFamily = {
        ...slide1,
        elements: [createTextElement('text-fontfam-1')]
    };

    console.log('До: шрифт', slideForFontFamily.elements[0].fontFam);
    const slideAfterFontFamilyChange = changeTextFontFamily(slideForFontFamily, 'text-fontfam-1', 'Times New Roman');
    console.log('После: шрифт', slideAfterFontFamilyChange.elements[0].fontFam);
    console.log('______________________________________________________________');

    // 13. changeTextColor
    console.log('13. changeTextColor');
    const slideForColor = {
        ...slide1,
        elements: [createTextElement('text-color-1')]
    };

    console.log('До: цвет', slideForColor.elements[0].color);
    const slideAfterColorChange = changeTextColor(slideForColor, 'text-color-1', '#ff0000');
    console.log('После: цвет', slideAfterColorChange.elements[0].color);
    console.log('______________________________________________________________');

    // 14. changeSlideBackground
    console.log('14. changeSlideBackground');
    const slideForBackground = createSlide('slide-bg-1', { type: 'none' });

    console.log('До: фон', slideForBackground.background);
    const slideAfterBackgroundChange = changeSlideBackground(slideForBackground, {
        type: 'gradient',
        colors: ['#ff0000', '#0000ff']
    });
    console.log('После: фон', slideAfterBackgroundChange.background);
    console.log('______________________________________________________________');

    console.log('=== ВСЕ ФУНКЦИИ ПРОТЕСТИРОВАНЫ ===');
</script>
</body>
</html>